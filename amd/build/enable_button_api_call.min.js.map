{"version":3,"sources":["../src/enable_button_api_call.js"],"names":["define","$","ajax","notification","ModalFactory","str","init","courseId","click","event","preventDefault","promise","call","methodname","args","fail","exception","done","response","body","error","get_strings","key","component","strs","create","title","then","modal","show","enabled","removeClass","addClass","attr","url","disabled"],"mappings":"AAAAA,OAAM,wCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAA6C,oBAA7C,CAAmE,UAAnE,CAAD,CACA,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAgCC,CAAhC,CAA8CC,CAA9C,CAAmD,CACvD,MAAO,CACLC,IAAI,CAAE,cAAAC,CAAQ,CAAI,CAChBN,CAAC,CAAC,kBAAD,CAAD,CAAsBO,KAAtB,CAA4B,SAAAC,CAAK,CAAI,CACnCA,CAAK,CAACC,cAAN,GADmC,GAU7BC,CAAAA,CAAO,CAAGT,CAAI,CAACU,IAAL,CAAU,CAJV,CACdC,UAAU,CAAE,6BADE,CAEdC,IAAI,CALO,CACRP,QADQ,CACGA,CADH,CAGG,CAIU,CAAV,EAAqB,CAArB,CAVmB,CAYnCI,CAAO,CAACI,IAAR,CAAaZ,CAAY,CAACa,SAA1B,EACAL,CAAO,CAACM,IAAR,CAAa,SAAAC,CAAQ,CAAI,CACvB,GAAMC,CAAAA,CAAI,CAAGD,CAAQ,CAAC,CAAD,CAArB,CAEA,GAAIC,CAAI,CAACC,KAAT,CAAgB,CACdf,CAAG,CAACgB,WAAJ,CAAgB,CACd,CAACC,GAAG,CAAE,mBAAN,CAA2BC,SAAS,CAAE,eAAtC,CADc,CAEd,CAACD,GAAG,CAAE,kBAAN,CAA0BC,SAAS,CAAE,eAArC,CAFc,CAAhB,EAGGN,IAHH,CAGQ,SAASO,CAAT,CAAe,CACrBpB,CAAY,CAACqB,MAAb,CAAoB,CAClBC,KAAK,CAAEF,CAAI,CAAC,CAAD,CADO,CAElBL,IAAI,CAAEK,CAAI,CAAC,CAAD,CAFQ,CAApB,EAGGG,IAHH,CAGQ,SAAAC,CAAK,CAAI,CAAEA,CAAK,CAACC,IAAN,EAAe,CAHlC,CAID,CARD,EAUA,MACD,CAED,GAAIV,CAAI,CAACW,OAAT,CAAkB,CAChB7B,CAAC,CAAC,mBAAD,CAAD,CAAuB8B,WAAvB,CAAmC,UAAnC,EACA9B,CAAC,CAAC,kBAAD,CAAD,CAAsB+B,QAAtB,CAA+B,UAA/B,EAEA/B,CAAC,CAAC,mBAAD,CAAD,CAAuBgC,IAAvB,CAA4B,MAA5B,CAAoCd,CAAI,CAACe,GAAzC,EACAjC,CAAC,CAAC,mBAAD,CAAD,CAAuB8B,WAAvB,CAAmC,UAAnC,CACD,CACF,CAxBD,CAyBD,CAtCD,EAwCA9B,CAAC,CAAC,mBAAD,CAAD,CAAuBO,KAAvB,CAA6B,SAAAC,CAAK,CAAI,CACpCA,CAAK,CAACC,cAAN,GADoC,GAU9BC,CAAAA,CAAO,CAAGT,CAAI,CAACU,IAAL,CAAU,CAJV,CACdC,UAAU,CAAE,8BADE,CAEdC,IAAI,CALO,CACRP,QADQ,CACGA,CADH,CAGG,CAIU,CAAV,EAAqB,CAArB,CAVoB,CAYpCI,CAAO,CAACI,IAAR,CAAaZ,CAAY,CAACa,SAA1B,EACAL,CAAO,CAACM,IAAR,CAAa,SAAAC,CAAQ,CAAI,CACvB,GAAMC,CAAAA,CAAI,CAAGD,CAAQ,CAAC,CAAD,CAArB,CAEA,GAAIC,CAAI,CAACgB,QAAT,CAAmB,CACjBlC,CAAC,CAAC,kBAAD,CAAD,CAAsB8B,WAAtB,CAAkC,UAAlC,EACA9B,CAAC,CAAC,mBAAD,CAAD,CAAuB+B,QAAvB,CAAgC,UAAhC,EACA/B,CAAC,CAAC,mBAAD,CAAD,CAAuB+B,QAAvB,CAAgC,UAAhC,CACD,CACF,CARD,CASD,CAtBD,CAuBD,CAjEI,CAmER,CArEK,CAAN","sourcesContent":["define(['jquery', 'core/ajax', 'core/notification', 'core/modal_factory', 'core/str'],\n      function($, ajax, notification, ModalFactory, str) {\n  return {\n    init: courseId => {\n      $('#enable-settings').click(event => {\n        event.preventDefault();\n\n        const args = {};\n        args.courseId = courseId;\n\n        const request = {\n          methodname: 'block_mad2api_enable_course',\n          args: args\n        };\n        const promise = ajax.call([request])[0];\n\n        promise.fail(notification.exception);\n        promise.done(response => {\n          const body = response[0];\n\n          if (body.error) {\n            str.get_strings([\n              {key: 'error_modal_title', component: 'block_mad2api'},\n              {key: 'error_modal_body', component: 'block_mad2api'}\n            ]).done(function(strs) {\n              ModalFactory.create({\n                title: strs[0],\n                body: strs[1]\n              }).then(modal => { modal.show(); });\n            });\n\n            return;\n          }\n\n          if (body.enabled) {\n            $('#disable-settings').removeClass('disabled');\n            $('#enable-settings').addClass('disabled');\n\n            $(\"#access-dashboard\").attr(\"href\", body.url);\n            $('#access-dashboard').removeClass('disabled');\n          }\n        });\n      });\n\n      $('#disable-settings').click(event => {\n        event.preventDefault();\n\n        const args = {};\n        args.courseId = courseId;\n\n        const request = {\n          methodname: 'block_mad2api_disable_course',\n          args: args\n        };\n        const promise = ajax.call([request])[0];\n\n        promise.fail(notification.exception);\n        promise.done(response => {\n          const body = response[0];\n\n          if (body.disabled) {\n            $('#enable-settings').removeClass('disabled');\n            $('#disable-settings').addClass('disabled');\n            $('#access-dashboard').addClass('disabled');\n          }\n        });\n      });\n    }\n  };\n});\n"],"file":"enable_button_api_call.min.js"}