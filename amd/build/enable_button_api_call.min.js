define(["jquery","core/ajax","core/notification","core/modal_factory","core/str"],function(s,d,o,l,t){return{init:a=>{s("#enable-settings").click(e=>{e.preventDefault();e={},e.courseId=a,console.log("test"),e={methodname:"block_mad2api_enable_course",args:e},e=d.call([e])[0];e.fail(o.exception),e.done(e=>{e=e[0];e.error?t.get_strings([{key:"error_modal_title",component:"block_mad2api"},{key:"error_modal_body",component:"block_mad2api"}]).done(function(e){l.create({title:e[0],body:e[1]}).then(e=>{e.show()})}):e.enabled&&(s("#disable-settings").removeClass("disabled"),s("#enable-settings").addClass("disabled"),s("#access-dashboard").attr("href",e.url),s("#access-dashboard").removeClass("disabled"))})}),s("#disable-settings").click(e=>{e.preventDefault();e={},e.courseId=a,e={methodname:"block_mad2api_disable_course",args:e},e=d.call([e])[0];e.fail(o.exception),e.done(e=>{e[0].disabled&&(s("#enable-settings").removeClass("disabled"),s("#disable-settings").addClass("disabled"),s("#access-dashboard").addClass("disabled"))})})}}});